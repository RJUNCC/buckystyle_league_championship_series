[bot] [2025-07-02 22:56:35] 2025-07-02 22:56:35,405 - discord.client - WARNING - PyNaCl is not installed, voice will NOT be supported
[bot] [2025-07-02 22:56:35] 2025-07-02 22:56:35,407 - __main__ - INFO - üè• Health check server task created
[bot] [2025-07-02 22:56:35] 2025-07-02 22:56:35,408 - __main__ - INFO - üîÑ Initializing database connection...
[bot] [2025-07-02 22:56:35] 2025-07-02 22:56:35,409 - models.database_config - INFO - ‚úÖ Configured PostgreSQL database engine
[bot] [2025-07-02 22:56:35] 2025-07-02 22:56:35,467 - models.database_config - INFO - ‚úÖ Database connection successful
[bot] [2025-07-02 22:56:35] 2025-07-02 22:56:35,469 - models.database_config - INFO - üìä PostgreSQL Version: PostgreSQL 17.5 on x86_64-pc-linux-gnu, compiled b...
[bot] [2025-07-02 22:56:35] 2025-07-02 22:56:35,484 - models.database_config - INFO - ‚úÖ Database tables created/verified
[bot] [2025-07-02 22:56:35] 2025-07-02 22:56:35,493 - models.database_config - INFO - üìã Tables in database: blcs_player_mappings, blcs_player_statistics, player_profiles, scheduling_sessions
[bot] [2025-07-02 22:56:35] 2025-07-02 22:56:35,495 - __main__ - INFO - üîß Checking for database migrations...
[bot] [2025-07-02 22:56:35] 2025-07-02 22:56:35,508 - __main__ - INFO - ‚úÖ Database schema is up to date
[bot] [2025-07-02 22:56:35] 2025-07-02 22:56:35,510 - __main__ - INFO - ‚úÖ PostgreSQL database initialized successfully
[bot] [2025-07-02 22:56:35] 2025-07-02 22:56:35,510 - __main__ - INFO - üìä Connected to PostgreSQL: discord-bot-postgresql-do-user-16248210-0.m.db.ondigitalocean.com:25060
[bot] [2025-07-02 22:56:35] 2025-07-02 22:56:35,511 - __main__ - INFO - ‚úÖ BLCSX ballchasing integration initialized
[bot] [2025-07-02 22:56:35] 2025-07-02 22:56:35,511 - __main__ - INFO -    üéÆ BLCSX Stats commands available:
[bot] [2025-07-02 22:56:35] 2025-07-02 22:56:35,511 - __main__ - INFO -    /blcs_profile - Comprehensive player profiles
[bot] [2025-07-02 22:56:35] 2025-07-02 22:56:35,511 - __main__ - INFO -    /blcs_leaderboard - Dominance quotient rankings
[bot] [2025-07-02 22:56:35] 2025-07-02 22:56:35,511 - __main__ - INFO -    /blcs_link - Link ballchasing.com account
[bot] [2025-07-02 22:56:35] 2025-07-02 22:56:35,511 - __main__ - INFO -    /blcs_update - Update stats (admin only)
[bot] [2025-07-02 22:56:35] 2025-07-02 22:56:35,511 - __main__ - INFO - ‚úÖ Traditional ballchasing integration initialized
[bot] [2025-07-02 22:56:35] 2025-07-02 22:56:35,513 - __main__ - INFO - ‚úÖ Loaded cog: DraftLotteryCog
[bot] [2025-07-02 22:56:35] 2025-07-02 22:56:35,576 - cogs.blcsx_stats - INFO - PostgreSQL database initialized for BLCS stats
[bot] [2025-07-02 22:56:35] 2025-07-02 22:56:35,576 - cogs.blcsx_stats - INFO - BLCSX Stats Cog initialized
[bot] [2025-07-02 22:56:35] 2025-07-02 22:56:35,578 - __main__ - INFO - ‚úÖ Loaded cog: BLCSXStatsCog
[bot] [2025-07-02 22:56:35] 2025-07-02 22:56:35,578 - __main__ - INFO - üöÄ Starting Discord bot...
[bot] [2025-07-02 22:56:35] 2025-07-02 22:56:35,578 - discord.client - INFO - logging in using static token
[bot] [2025-07-02 22:56:35] 2025-07-02 22:56:35,600 - __main__ - INFO - ‚úÖ Health check server started on port 8080
[bot] [2025-07-02 22:56:35] 2025-07-02 22:56:35,858 - discord.gateway - INFO - Shard ID None has sent the IDENTIFY payload.
[bot] [2025-07-02 22:56:35] 2025-07-02 22:56:35,955 - discord.gateway - INFO - Shard ID None has connected to Gateway: ["gateway-prd-us-east1-c-pq04",{"micros":76148,"calls":["id_created",{"micros":573,"calls":[]},"session_lookup_time",{"micros":507,"calls":[]},"session_lookup_finished",{"micros":14,"calls":[]},"discord-sessions-prd-2-176",{"micros":74489,"calls":["start_session",{"micros":56137,"calls":["discord-api-rpc-6679f9477b-wkp7v",{"micros":42982,"calls":["get_user",{"micros":5735},"get_guilds",{"micros":3453},"send_scheduled_deletion_message",{"micros":12},"guild_join_requests",{"micros":2},"authorized_ip_coro",{"micros":11},"pending_payments",{"micros":4268},"apex_experiments",{"micros":1943},"user_activities",{"micros":3},"played_application_ids",{"micros":1}]}]},"starting_guild_connect",{"micros":50,"calls":[]},"presence_started",{"micros":9661,"calls":[]},"guilds_started",{"micros":79,"calls":[]},"lobbies_started",{"micros":1,"calls":[]},"guilds_connect",{"micros":1,"calls":[]},"presence_connect",{"micros":8540,"calls":[]},"connect_finished",{"micros":8544,"calls":[]},"build_ready",{"micros":14,"calls":[]},"clean_ready",{"micros":1,"calls":[]},"optimize_ready",{"micros":0,"calls":[]},"split_ready",{"micros":0,"calls":[]}]}]}] (Session ID: 11aa3fa275bcadf287b213b269157ff6).
[bot] [2025-07-02 22:56:37] 2025-07-02 22:56:37,987 - __main__ - INFO - ‚úÖ BLCS Bot#6695 has connected to Discord!
[bot] [2025-07-02 22:56:37] 2025-07-02 22:56:37,987 - __main__ - INFO - üìä Connected to 2 servers
[bot] [2025-07-02 22:56:37] 2025-07-02 22:56:37,987 - __main__ - INFO - ‚úÖ Slash commands auto-synced by py-cord
[bot] [2025-07-03 00:20:51] 2025-07-03 00:20:51,600 - discord.client - INFO - Got a request to RESUME the websocket.
[bot] [2025-07-03 00:20:51] 2025-07-03 00:20:51,698 - discord.gateway - INFO - Shard ID None has sent the RESUME payload.
[bot] [2025-07-03 00:20:51] 2025-07-03 00:20:51,719 - discord.gateway - INFO - Shard ID None has successfully RESUMED session 11aa3fa275bcadf287b213b269157ff6 under trace ["gateway-prd-us-east1-d-v05g",{"micros":553,"calls":["id_created",{"micros":0,"calls":[]},"session_lookup_time",{"micros":294,"calls":[]},"session_lookup_finished",{"micros":15,"calls":[]},"discord-sessions-prd-2-176",{"micros":17}]}].
[bot] [2025-07-03 00:42:38] 2025-07-03 00:42:38,315 - discord.client - INFO - Got a request to RESUME the websocket.
[bot] [2025-07-03 00:42:38] 2025-07-03 00:42:38,405 - discord.gateway - INFO - Shard ID None has sent the RESUME payload.
[bot] [2025-07-03 00:42:38] 2025-07-03 00:42:38,425 - discord.gateway - INFO - Shard ID None has successfully RESUMED session 11aa3fa275bcadf287b213b269157ff6 under trace ["gateway-prd-us-east1-c-hls5",{"micros":716,"calls":["id_created",{"micros":0,"calls":[]},"session_lookup_time",{"micros":439,"calls":[]},"session_lookup_finished",{"micros":19,"calls":[]},"discord-sessions-prd-2-176",{"micros":17}]}].
[bot] [2025-07-03 01:12:22] 2025-07-03 01:12:22,236 - discord.gateway - INFO - Websocket closed with 1006, attempting a reconnect.
[bot] [2025-07-03 01:12:22] 2025-07-03 01:12:22,236 - discord.client - INFO - Got a request to RESUME the websocket.
[bot] [2025-07-03 01:12:22] 2025-07-03 01:12:22,339 - discord.gateway - INFO - Shard ID None has sent the RESUME payload.
[bot] [2025-07-03 01:12:22] 2025-07-03 01:12:22,364 - discord.gateway - INFO - Shard ID None has successfully RESUMED session 11aa3fa275bcadf287b213b269157ff6 under trace ["gateway-prd-us-east1-b-x2rf",{"micros":472,"calls":["id_created",{"micros":0,"calls":[]},"session_lookup_time",{"micros":260,"calls":[]},"session_lookup_finished",{"micros":11,"calls":[]},"discord-sessions-prd-2-176",{"micros":20}]}].
[bot] [2025-07-03 01:59:35] Ignoring exception in command view_all_availability:
[bot] [2025-07-03 01:59:35] Traceback (most recent call last):
[bot] [2025-07-03 01:59:35]   File "/usr/local/lib/python3.12/site-packages/discord/commands/core.py", line 138, in wrapped
[bot] [2025-07-03 01:59:35]     ret = await coro(arg)
[bot] [2025-07-03 01:59:35]           ^^^^^^^^^^^^^^^
[bot] [2025-07-03 01:59:35]   File "/usr/local/lib/python3.12/site-packages/discord/commands/core.py", line 1078, in _invoke
[bot] [2025-07-03 01:59:35]     await self.callback(self.cog, ctx, **kwargs)
[bot] [2025-07-03 01:59:35]   File "/app/cogs/draft_prob.py", line 1536, in view_all_availability
[bot] [2025-07-03 01:59:35]     if not session.players_responded:
[bot] [2025-07-03 01:59:35]            ^^^^^^^^^^^^^^^^^^^^^^^^^
[bot] [2025-07-03 01:59:35]   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/attributes.py", line 566, in __get__
[bot] [2025-07-03 01:59:35]     return self.impl.get(state, dict_)  # type: ignore[no-any-return]
[bot] [2025-07-03 01:59:35]            ^^^^^^^^^^^^^^^^^^^^^^^^^^^
[bot] [2025-07-03 01:59:35]   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/attributes.py", line 1086, in get
[bot] [2025-07-03 01:59:35]     value = self._fire_loader_callables(state, key, passive)
[bot] [2025-07-03 01:59:35]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
[bot] [2025-07-03 01:59:35]   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/attributes.py", line 1116, in _fire_loader_callables
[bot] [2025-07-03 01:59:35]     return state._load_expired(state, passive)
[bot] [2025-07-03 01:59:35]            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
[bot] [2025-07-03 01:59:35]   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/state.py", line 803, in _load_expired
[bot] [2025-07-03 01:59:35]     self.manager.expired_attribute_loader(self, toload, passive)
[bot] [2025-07-03 01:59:35]   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/loading.py", line 1603, in load_scalar_attributes
[bot] [2025-07-03 01:59:35]     raise orm_exc.DetachedInstanceError(
[bot] [2025-07-03 01:59:35] sqlalchemy.orm.exc.DetachedInstanceError: Instance <SchedulingSession at 0x7eccea746bd0> is not bound to a Session; attribute refresh operation cannot proceed (Background on this error at: https://sqlalche.me/e/20/bhk3)
[bot] [2025-07-03 01:59:35] 
[bot] [2025-07-03 01:59:35] The above exception was the direct cause of the following exception:
[bot] [2025-07-03 01:59:35] 
[bot] [2025-07-03 01:59:35] Traceback (most recent call last):
[bot] [2025-07-03 01:59:35]   File "/usr/local/lib/python3.12/site-packages/discord/bot.py", line 1137, in invoke_application_command
[bot] [2025-07-03 01:59:35]     await ctx.command.invoke(ctx)
[bot] [2025-07-03 01:59:35]   File "/usr/local/lib/python3.12/site-packages/discord/commands/core.py", line 435, in invoke
[bot] [2025-07-03 01:59:35]     await injected(ctx)
[bot] [2025-07-03 01:59:35]   File "/usr/local/lib/python3.12/site-packages/discord/commands/core.py", line 146, in wrapped
[bot] [2025-07-03 01:59:35]     raise ApplicationCommandInvokeError(exc) from exc
[bot] [2025-07-03 01:59:35] discord.errors.ApplicationCommandInvokeError: Application Command raised an exception: DetachedInstanceError: Instance <SchedulingSession at 0x7eccea746bd0> is not bound to a Session; attribute refresh operation cannot proceed (Background on this error at: https://sqlalche.me/e/20/bhk3)
[bot] [2025-07-03 02:01:39] 2025-07-03 02:01:39,061 - discord.client - INFO - Got a request to RESUME the websocket.
[bot] [2025-07-03 02:01:39] 2025-07-03 02:01:39,167 - discord.gateway - INFO - Shard ID None has sent the RESUME payload.
[bot] [2025-07-03 02:01:39] 2025-07-03 02:01:39,191 - discord.gateway - INFO - Shard ID None has successfully RESUMED session 11aa3fa275bcadf287b213b269157ff6 under trace ["gateway-prd-us-east1-c-hls5",{"micros":495,"calls":["id_created",{"micros":0,"calls":[]},"session_lookup_time",{"micros":237,"calls":[]},"session_lookup_finished",{"micros":30,"calls":[]},"discord-sessions-prd-2-176",{