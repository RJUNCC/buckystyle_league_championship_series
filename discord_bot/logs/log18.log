[bot] [2025-07-03 02:51:18] 2025-07-03 02:51:18,191 - discord.client - WARNING - PyNaCl is not installed, voice will NOT be supported
[bot] [2025-07-03 02:51:18] 2025-07-03 02:51:18,192 - __main__ - INFO - üè• Health check server task created
[bot] [2025-07-03 02:51:18] 2025-07-03 02:51:18,192 - __main__ - INFO - üîÑ Initializing database connection...
[bot] [2025-07-03 02:51:18] 2025-07-03 02:51:18,193 - models.database_config - INFO - ‚úÖ Configured PostgreSQL database engine
[bot] [2025-07-03 02:51:18] 2025-07-03 02:51:18,250 - models.database_config - INFO - ‚úÖ Database connection successful
[bot] [2025-07-03 02:51:18] 2025-07-03 02:51:18,252 - models.database_config - INFO - üìä PostgreSQL Version: PostgreSQL 17.5 on x86_64-pc-linux-gnu, compiled b...
[bot] [2025-07-03 02:51:18] 2025-07-03 02:51:18,266 - models.database_config - INFO - ‚úÖ Database tables created/verified
[bot] [2025-07-03 02:51:18] 2025-07-03 02:51:18,275 - models.database_config - INFO - üìã Tables in database: blcs_player_mappings, blcs_player_statistics, player_profiles, scheduling_sessions
[bot] [2025-07-03 02:51:18] 2025-07-03 02:51:18,277 - __main__ - INFO - üîß Checking for database migrations...
[bot] [2025-07-03 02:51:18] 2025-07-03 02:51:18,293 - __main__ - INFO - ‚úÖ Database schema is up to date
[bot] [2025-07-03 02:51:18] 2025-07-03 02:51:18,295 - __main__ - INFO - ‚úÖ PostgreSQL database initialized successfully
[bot] [2025-07-03 02:51:18] 2025-07-03 02:51:18,295 - __main__ - INFO - üìä Connected to PostgreSQL: discord-bot-postgresql-do-user-16248210-0.m.db.ondigitalocean.com:25060
[bot] [2025-07-03 02:51:18] 2025-07-03 02:51:18,295 - __main__ - INFO - ‚úÖ BLCSX ballchasing integration initialized
[bot] [2025-07-03 02:51:18] 2025-07-03 02:51:18,295 - __main__ - INFO -    üéÆ BLCSX Stats commands available:
[bot] [2025-07-03 02:51:18] 2025-07-03 02:51:18,295 - __main__ - INFO -    /blcs_profile - Comprehensive player profiles
[bot] [2025-07-03 02:51:18] 2025-07-03 02:51:18,295 - __main__ - INFO -    /blcs_leaderboard - Dominance quotient rankings
[bot] [2025-07-03 02:51:18] 2025-07-03 02:51:18,295 - __main__ - INFO -    /blcs_link - Link ballchasing.com account
[bot] [2025-07-03 02:51:18] 2025-07-03 02:51:18,296 - __main__ - INFO -    /blcs_update - Update stats (admin only)
[bot] [2025-07-03 02:51:18] 2025-07-03 02:51:18,296 - __main__ - INFO - ‚úÖ Traditional ballchasing integration initialized
[bot] [2025-07-03 02:51:18] 2025-07-03 02:51:18,296 - __main__ - INFO - ‚úÖ Loaded cog: DraftLotteryCog
[bot] [2025-07-03 02:51:18] 2025-07-03 02:51:18,365 - cogs.blcsx_stats - INFO - PostgreSQL database initialized for BLCS stats
[bot] [2025-07-03 02:51:18] 2025-07-03 02:51:18,365 - cogs.blcsx_stats - INFO - BLCSX Stats Cog initialized
[bot] [2025-07-03 02:51:18] 2025-07-03 02:51:18,366 - __main__ - INFO - ‚úÖ Loaded cog: BLCSXStatsCog
[bot] [2025-07-03 02:51:18] 2025-07-03 02:51:18,366 - __main__ - INFO - üöÄ Starting Discord bot...
[bot] [2025-07-03 02:51:18] 2025-07-03 02:51:18,367 - discord.client - INFO - logging in using static token
[bot] [2025-07-03 02:51:18] 2025-07-03 02:51:18,379 - __main__ - INFO - ‚úÖ Health check server started on port 8080
[bot] [2025-07-03 02:51:18] 2025-07-03 02:51:18,665 - discord.gateway - INFO - Shard ID None has sent the IDENTIFY payload.
[bot] [2025-07-03 02:51:18] 2025-07-03 02:51:18,958 - discord.gateway - INFO - Shard ID None has connected to Gateway: ["gateway-prd-us-east1-b-s4p9",{"micros":270519,"calls":["id_created",{"micros":466,"calls":[]},"session_lookup_time",{"micros":1304,"calls":[]},"session_lookup_finished",{"micros":12,"calls":[]},"discord-sessions-prd-2-160",{"micros":268423,"calls":["start_session",{"micros":253449,"calls":["discord-api-rpc-bdd745bbd-t588t",{"micros":230520,"calls":["get_user",{"micros":72359},"get_guilds",{"micros":39449},"send_scheduled_deletion_message",{"micros":12},"guild_join_requests",{"micros":319},"authorized_ip_coro",{"micros":17},"pending_payments",{"micros":4059},"apex_experiments",{"micros":11690},"user_activities",{"micros":6},"played_application_ids",{"micros":3}]}]},"starting_guild_connect",{"micros":28,"calls":[]},"presence_started",{"micros":303,"calls":[]},"guilds_started",{"micros":95,"calls":[]},"lobbies_started",{"micros":1,"calls":[]},"guilds_connect",{"micros":1,"calls":[]},"presence_connect",{"micros":14531,"calls":[]},"connect_finished",{"micros":14534,"calls":[]},"build_ready",{"micros":11,"calls":[]},"clean_ready",{"micros":1,"calls":[]},"optimize_ready",{"micros":0,"calls":[]},"split_ready",{"micros":0,"calls":[]}]}]}] (Session ID: 34f8935fe645b1a139cb036568d6d32e).
[bot] [2025-07-03 02:51:20] 2025-07-03 02:51:20,978 - __main__ - INFO - ‚úÖ BLCS Bot#6695 has connected to Discord!
[bot] [2025-07-03 02:51:20] 2025-07-03 02:51:20,978 - __main__ - INFO - üìä Connected to 2 servers
[bot] [2025-07-03 02:51:20] 2025-07-03 02:51:20,980 - __main__ - INFO - ‚úÖ Slash commands auto-synced by py-cord
[bot] [2025-07-03 02:54:50] Ignoring exception in command schedule_game:
[bot] [2025-07-03 02:54:50] Traceback (most recent call last):
[bot] [2025-07-03 02:54:50]   File "/usr/local/lib/python3.12/site-packages/discord/commands/core.py", line 138, in wrapped
[bot] [2025-07-03 02:54:50]     ret = await coro(arg)
[bot] [2025-07-03 02:54:50]           ^^^^^^^^^^^^^^^
[bot] [2025-07-03 02:54:50]   File "/usr/local/lib/python3.12/site-packages/discord/commands/core.py", line 1078, in _invoke
[bot] [2025-07-03 02:54:50]     await self.callback(self.cog, ctx, **kwargs)
[bot] [2025-07-03 02:54:50]   File "/app/cogs/draft_prob.py", line 1076, in schedule_game
[bot] [2025-07-03 02:54:50]     f"‚è≥ **Progress:** Waiting for {saved_db_session.expected_players} players...\n"
[bot] [2025-07-03 02:54:50]                                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
[bot] [2025-07-03 02:54:50]   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/attributes.py", line 566, in __get__
[bot] [2025-07-03 02:54:50]     return self.impl.get(state, dict_)  # type: ignore[no-any-return]
[bot] [2025-07-03 02:54:50]            ^^^^^^^^^^^^^^^^^^^^^^^^^^^
[bot] [2025-07-03 02:54:50]   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/attributes.py", line 1086, in get
[bot] [2025-07-03 02:54:50]     value = self._fire_loader_callables(state, key, passive)
[bot] [2025-07-03 02:54:50]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
[bot] [2025-07-03 02:54:50]   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/attributes.py", line 1116, in _fire_loader_callables
[bot] [2025-07-03 02:54:50]     return state._load_expired(state, passive)
[bot] [2025-07-03 02:54:50]            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
[bot] [2025-07-03 02:54:50]   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/state.py", line 803, in _load_expired
[bot] [2025-07-03 02:54:50]     self.manager.expired_attribute_loader(self, toload, passive)
[bot] [2025-07-03 02:54:50]   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/loading.py", line 1603, in load_scalar_attributes
[bot] [2025-07-03 02:54:50]     raise orm_exc.DetachedInstanceError(
[bot] [2025-07-03 02:54:50] sqlalchemy.orm.exc.DetachedInstanceError: Instance <SchedulingSession at 0x7ec93edfeab0> is not bound to a Session; attribute refresh operation cannot proceed (Background on this error at: https://sqlalche.me/e/20/bhk3)
[bot] [2025-07-03 02:54:50] 
[bot] [2025-07-03 02:54:50] The above exception was the direct cause of the following exception:
[bot] [2025-07-03 02:54:50] 
[bot] [2025-07-03 02:54:50] Traceback (most recent call last):
[bot] [2025-07-03 02:54:50]   File "/usr/local/lib/python3.12/site-packages/discord/bot.py", line 1137, in invoke_application_command
[bot] [2025-07-03 02:54:50]     await ctx.command.invoke(ctx)
[bot] [2025-07-03 02:54:50]   File "/usr/local/lib/python3.12/site-packages/discord/commands/core.py", line 435, in invoke
[bot] [2025-07-03 02:54:50]     await injected(ctx)
[bot] [2025-07-03 02:54:50]   File "/usr/local/lib/python3.12/site-packages/discord/commands/core.py", line 146, in wrapped
[bot] [2025-07-03 02:54:50]     raise ApplicationCommandInvokeError(exc) from exc
[bot] [2025-07-03 02:54:50] discord.errors.ApplicationCommandInvokeError: Application Command raised an exception: DetachedInstanceError: Instance <SchedulingSession at 0x7ec93edfeab0> is not bound to a Session; attribute refresh operation cannot proceed (Background on this error at: https://sqlalche.me/e/20/bhk3)